"use strict";(self.webpackChunk_zjlab_fe_data_hub_ui=self.webpackChunk_zjlab_fe_data_hub_ui||[]).push([[930],{27930:(n,r,t)=>{t.d(r,{default:()=>e});const e="## 何时使用\r\n\r\ntip-tap 是一个基于 [TipTap](https://tiptap.dev/) 和 React 构建的强大富文本编辑器组件。当需要提供富文本编辑功能时使用，支持文本格式化、图片插入、表格编辑、Markdown 支持等功能。组件提供了可编辑的编辑器（TipTapEditor）和只读的阅读器（TipTapReader）两种模式。\r\n\r\n## 主要特性\r\n\r\n1. **文本格式化**：支持粗体、斜体、下划线、删除线\r\n2. **标题支持**：支持 H1、H2、H3、H4 标题\r\n3. **列表**：支持有序列表和无序列表\r\n4. **文本对齐**：支持左对齐、居中、右对齐\r\n5. **颜色**：支持文本颜色和背景高亮颜色\r\n6. **链接**：支持插入和编辑超链接\r\n7. **代码**：支持行内代码和代码块（带语法高亮）\r\n8. **引用**：支持引用块\r\n9. **图片**：支持上传和插入图片（base64 支持）\r\n10. **表格**：支持插入和编辑可调整大小的表格（带表头）\r\n11. **Markdown**：完整的 Markdown 支持，粘贴时自动检测\r\n12. **工具栏**：顶部工具栏提供所有格式化选项\r\n13. **气泡菜单**：选中文本时出现的上下文菜单\r\n14. **浮动菜单**：空行时出现的快速插入菜单\r\n15. **多种格式**：支持获取 HTML、JSON 或 Markdown 格式的内容\r\n16. **Ref API**：提供命令式 API 用于程序化控制\r\n\r\n## 代码演示\r\n\r\n<demo src=\"@/components/tip-tap/demo/index.tsx\"></demo>\r\n\r\n## 使用方法\r\n\r\n### 基本用法\r\n\r\n#### TipTapEditor\r\n\r\n```tsx\r\nimport { useRef } from 'react';\r\nimport TipTapEditor, { type TipTapEditorHandle } from '@/components/tip-tap';\r\n\r\nfunction MyComponent() {\r\n  const editorRef = useRef<TipTapEditorHandle>(null);\r\n\r\n  const handleSave = () => {\r\n    const content = editorRef.current?.getContent();\r\n    console.log('保存的内容:', content);\r\n  };\r\n\r\n  return (\r\n    <TipTapEditor\r\n      ref={editorRef}\r\n      content=\"<p>初始内容</p>\"\r\n      placeholder=\"开始输入内容...\"\r\n      onChange={(html) => {\r\n        console.log('内容变化:', html);\r\n      }}\r\n    />\r\n  );\r\n}\r\n```\r\n\r\n#### TipTapReader\r\n\r\n```tsx\r\nimport { TipTapReader } from '@/components/tip-tap';\r\n\r\nfunction MyComponent() {\r\n  const content = '<h1>标题</h1><p>一些内容</p>';\r\n\r\n  return (\r\n    <TipTapReader content={content} />\r\n  );\r\n}\r\n```\r\n\r\n## API\r\n\r\n### TipTapEditor\r\n\r\n| 参数 | 说明 | 类型 | 默认值 | 版本 | 必须 |\r\n| --- | --- | --- | --- | --- | --- |\r\n| content | 初始 HTML 内容 | `string` | `''` | - | 否 |\r\n| placeholder | 编辑器为空时的占位文本 | `string` | `'开始输入内容...'` | - | 否 |\r\n| editable | 是否可编辑 | `boolean` | `true` | - | 否 |\r\n| autofocus | 是否自动聚焦 | `boolean` | `false` | - | 否 |\r\n| className | 编辑器容器的额外 CSS 类名 | `string` | `''` | - | 否 |\r\n| toolbarClassName | 工具栏的额外 CSS 类名 | `string` | `''` | - | 否 |\r\n| onChange | 内容变化时的回调函数 | `(html: string) => void` | - | - | 否 |\r\n\r\n### TipTapEditor Ref 方法\r\n\r\n通过 `ref` 可以访问以下方法：\r\n\r\n| 方法 | 说明 | 返回值 |\r\n| --- | --- | --- |\r\n| getContent | 获取 HTML 格式的内容 | `string` |\r\n| getJSON | 获取 JSON 格式的内容 | `Record<string, unknown>` |\r\n| getMarkdown | 获取 Markdown 格式的内容 | `string` |\r\n| setContent | 设置 HTML 内容 | `void` |\r\n| setMarkdown | 设置 Markdown 内容 | `void` |\r\n| focus | 聚焦编辑器 | `void` |\r\n| isEmpty | 检查编辑器是否为空 | `boolean` |\r\n\r\n### TipTapReader\r\n\r\n| 参数 | 说明 | 类型 | 默认值 | 版本 | 必须 |\r\n| --- | --- | --- | --- | --- | --- |\r\n| content | 要显示的 HTML 内容 | `string` | - | - | 是 |\r\n| className | 额外的 CSS 类名 | `string` | `''` | - | 否 |\r\n\r\n## 高级用法\r\n\r\n### 程序化内容操作\r\n\r\n```tsx\r\nconst editorRef = useRef<TipTapEditorHandle>(null);\r\n\r\n// 获取不同格式的内容\r\nconst html = editorRef.current?.getContent();\r\nconst json = editorRef.current?.getJSON();\r\nconst markdown = editorRef.current?.getMarkdown();\r\n\r\n// 设置内容\r\neditorRef.current?.setContent('<p>新内容</p>');\r\neditorRef.current?.setMarkdown('# 标题\\n\\n内容');\r\n\r\n// 检查是否为空\r\nconst isEmpty = editorRef.current?.isEmpty();\r\n\r\n// 聚焦编辑器\r\neditorRef.current?.focus();\r\n```\r\n\r\n### 在编辑和只读模式之间切换\r\n\r\n```tsx\r\nconst [isEditing, setIsEditing] = useState(true);\r\nconst [content, setContent] = useState('');\r\n\r\nreturn (\r\n  <>\r\n    {isEditing ? (\r\n      <TipTapEditor\r\n        content={content}\r\n        onChange={setContent}\r\n      />\r\n    ) : (\r\n      <TipTapReader content={content} />\r\n    )}\r\n    <button onClick={() => setIsEditing(!isEditing)}>\r\n      {isEditing ? '查看' : '编辑'}\r\n    </button>\r\n  </>\r\n);\r\n```\r\n\r\n### 只读编辑器\r\n\r\n```tsx\r\n<TipTapEditor\r\n  content={content}\r\n  editable={false}\r\n/>\r\n```\r\n\r\n## 注意事项\r\n\r\n1. 图片上传支持 base64 格式，大图片可能会导致性能问题，建议使用图片上传服务。\r\n\r\n2. 使用 `getContent()` 获取的内容是 HTML 格式，可以直接保存到数据库或用于显示。\r\n\r\n3. 使用 `getMarkdown()` 可以获取 Markdown 格式的内容，便于版本控制和纯文本编辑。\r\n\r\n4. 组件支持粘贴 Markdown 内容，会自动转换为富文本格式。\r\n\r\n5. 通过 CSS 变量可以自定义样式，相关变量定义在 `styles/variables.css` 中。\r\n\r\n## 内部实现\r\n\r\ntip-tap 组件内部使用了以下关键技术和方法：\r\n\r\n1. **TipTap 编辑器核心**：基于 `@tiptap/react` 构建，使用 `useEditor` hook 管理编辑器实例。\r\n\r\n2. **扩展系统**：通过 TipTap 扩展系统实现各种功能：\r\n   - StarterKit：核心编辑功能\r\n   - TextAlign：文本对齐\r\n   - Highlight：文本高亮\r\n   - Color：文本颜色\r\n   - Image：图片插入\r\n   - Table：表格支持\r\n   - CodeBlockLowlight：语法高亮的代码块\r\n   - Markdown：Markdown 解析和序列化\r\n\r\n3. **菜单系统**：\r\n   - 工具栏（Toolbar）：顶部固定工具栏\r\n   - 气泡菜单（BubbleMenu）：选中文本时显示\r\n   - 浮动菜单（FloatingMenu）：空行时显示\r\n\r\n4. **样式系统**：使用 CSS 模块化，包含：\r\n   - `editor.css`：编辑器样式\r\n   - `content.css`：内容样式\r\n   - `toolbar.css`：工具栏样式\r\n   - `menus.css`：菜单样式\r\n   - `animations.css`：动画样式\r\n   - `variables.css`：CSS 变量\r\n\r\n5. **Ref API**：通过 `useImperativeHandle` 暴露命令式 API，方便外部程序化控制编辑器。\r\n\r\n通过这些实现，tip-tap 组件提供了强大的富文本编辑功能，同时保持了良好的用户体验和性能。\r\n"}}]);